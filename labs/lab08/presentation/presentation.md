---
## Front matter
lang: ru-RU
title: Лабораторная работа №8
subtitle: "Модель TCP/AQM"
author:
  - Кадров Виктор Максимович
teacher:
  - Кулябов Д. С.
  - д.ф.-м.н., профессор
  - профессор кафедры теории вероятностей и кибербезопасности 
institute:
  - Российский университет дружбы народов имени Патриса Лумумбы, Москва, Россия
date: 29 марта 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

## Цель работы

Исследовать модель TCP/AQM с помощью программы *xcos* и OpenModelica.

## Задание

- реализовать модель TCP/AQM в xcos;
- реализовать модель TCP/AQM в OpenModelica;
- построить графики динамики изменения размера TCP окна и размера очереди;
- построить фазовые портреты.

## Теоретическая часть

$$
\dot{W}(t) = \frac{1}{R} - \frac{W(t)W(t-R)}{2R} K Q(t-R)
$$

$$
\dot{Q}(t) = 
\begin{cases} 
    \frac{NW(t)}{R} - C, & Q(t) > 0, \\
    \max \left( \frac{NW(t)}{R} - C, 0 \right), & Q(t) = 0.
\end{cases}
$$

## Реализация модели в xcos

В меню Моделирование, Задать переменные окружения зададим значения переменных.

![Ввод переменных окружения](image/1_1.png){#fig:001 width=70%}

## Реализация модели в xcos

Для реализации введем выражение, определяющее $\dot{Q}(t)$, в блок Expression.

![Изменение параметров блока "Expression"](image/2_1.png){#fig:002 width=70%}

## Реализация модели в xcos

Установим начальные значения в блоках интегрирования.

![Изменение параметров блоков интегрирования](image/3_1.png){#fig:003 width=70%} 

## Реализация модели в xcos

![Изменение параметров блоков интегрирования](image/4_1.png){#fig:004 width=70%} 

## Реализация модели в xcos

![Изменение параметров блока "Continuous fix delay"](image/5_1.png){#fig:005 width=50%}

## Реализация модели в xcos

![Параметры моделирования](image/6_1.png){#fig:006 width=70%}

## Реализация модели в xcos

Изменим параметры генерирующих устройств, изменим цвет графиков, масштаб. Так же у блока CSCOPE ставим параметр `refresh period` = 100. 

![Параметры блока "CSCOPE"](image/7_1.png){#fig:007 width=40%}

## Реализация модели в xcos

![Параметры блока "CSCOPXY"](image/8_1.png){#fig:008 width=40%}

## Реализация модели в xcos

![Модель TCP/AQM в xcos](image/9_1.png){#fig:009 width=70%}

## Результаты моделирования в xcos при C = 1

Запустим моделирование и получим следующие графики. 

![Динамика изменения размера TCP окна W(t)(красная) и размера очереди Q(t)(черная) в xcos. C = 1](image/10_1.png){#fig:010 width=50%}

## Результаты моделирования в xcos при C = 1

Фазовый портрет показывает наличие автоколебаний параметров системы — фазовая траектория осциллирует вокруг своей стационарной точки.

![Фазовый портрет (W, Q) в xcos. C = 1](image/11_1.png){#fig:011 width=40%}

## Реализация модели в xcos

![Измененные переменные окружения](image/12_1.png){#fig:012 width=70%}

## Результаты моделирования в xcos при C = 0.9

![Динамика изменения размера TCP окна W(t)(красная) и размера очереди Q(t)(черная) в xcos. C = 0.9](image/13_1.png){#fig:013 width=50%}

## Результаты моделирования в xcos при C = 0.9

![Фазовый портрет (W, Q) в xcos. C = 0.9](image/14_1.png){#fig:014 width=50%}

## Реализация модели в OpenModelica

![Реализация модели TCP/AQM в OpenModelica](image/15_1.png){#fig:015 width=55%}

## Реализация модели в OpenModelica

![Параметры симуляции в OpenModelica](image/16_1.png){#fig:016 width=70%}

## Результаты моделирования в OpenModelica при C = 1

![Динамика изменения размера TCP окна W(t)(синяя) и размера очереди Q(t)(красная) в OpenModelica. C = 1](image/17_1.png){#fig:017 width=70%}

## Результаты моделирования в OpenModelica при C = 1

![Фазовый портрет (W, Q) в OpenModelica. C = 1](image/18_1.png){#fig:018 width=70%}

## Реализация модели в OpenModelica

![Измененные параметры симуляции в OpenModelica. С = 0.9](image/19_1.png){#fig:019 width=70%}

## Результаты моделирования в OpenModelica при C = 0.9

![Динамика изменения размера TCP окна W(t)(синяя) и размера очереди Q(t)(красная) в OpenModelica. C = 0.9](image/20_1.png){#fig:020 width=70%}

## Результаты моделирования в OpenModelica при C = 0.9

![Фазовый портрет (W, Q) в OpenModelica. C = 0.9](image/21_1.png){#fig:021 width=70%}

## Выводы

Мы исследовали модель TCP/AQM с помощью программы *xcos* и OpenModelica.